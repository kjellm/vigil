#! /usr/bin/env ruby

require 'trollop'
require 'vigil'
require 'yaml'

opts = Trollop::options do
  opt :rcfile, "Path to the configuration file"
end

root = File.join(File.dirname(__FILE__), '..')
if !opts[:rcfile] and File.exists?(File.join(root, '.git'))
  opts[:rcfile] = File.join root, 'vigil.yml'
end

opts = YAML.load_file(opts[:rcfile]).merge(opts)

Vigil.new(opts).run

